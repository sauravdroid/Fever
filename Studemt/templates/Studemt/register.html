{% extends 'Studemt/base.html' %}
{% block body %}
    <form method="post" action="">
        <input type="text" name="username" placeholder="Username" required>
        <input type="text" name="password" placeholder="Password" required>
        <input type="text" name="firstname" placeholder="Firstname" required>
        <input type="text" name="lastname" placeholder="Lastname" required>
        {% csrf_token %}
        <table>
            {{ form.as_table }}
            <div class="well well-sm">
                <div>
                    First Preference: <select name="first_pref" id="first_pref">
                    <option selected disabled>Select Preference</option>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}">{{ subject.stream }}</option>
                    {% endfor %}
                </select>
                </div>
                <div style="margin-top: 20px;">
                    Second Preference: <select name="second_pref" id="second_pref">
                    <option selected disabled>Select Preference</option>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}">{{ subject.stream }}</option>
                    {% endfor %}
                </select>
                </div>
                <div style="margin-top: 20px;">
                    Third Preference: <select name="third_pref" id="third_pref">
                    <option selected disabled>Select Preference</option>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}">{{ subject.stream }}</option>
                    {% endfor %}
                </select>
                </div>
                <div style="margin-top: 20px;">
                    Fourth Preference: <select name="fourth_pref" id="fourth_pref">
                    <option selected disabled>Select Preference</option>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}">{{ subject.stream }}</option>
                    {% endfor %}
                </select>
                </div>
                Small Well
            </div>
        </table>
        <button type="submit">Register</button>
    </form>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#second_pref').css('transform', 'scale(0,0)');
            $('#third_pref').css('transform', 'scale(0,0)');
            $('#fourth_pref').css('transform', 'scale(0,0)');
            var arr = [];
            $('#first_pref').change(function () {
                var option = this.options[this.selectedIndex];
                arr['first_pref'] = option.value;
                arr['first_pref_value'] = option.innerText;
                console.log(option.innerText);
                $('#second_pref').css('transform', 'scale(1,1)');
                $("#second_pref option:contains(" + option.innerText + ")").attr("disabled", "disabled");
            });

            $('#second_pref').change(function () {
                var option = this.options[this.selectedIndex];
                arr['second_pref'] = option.value;
                arr['second_pref_value'] = option.innerText;
                console.log(arr);
                var first = arr['first_pref_value'];
                $('#third_pref').css('transform', 'scale(1,1)');
                $("#third_pref option:contains(" + option.innerText + ")").attr("disabled", "disabled");
                $("#third_pref option:contains(" + first + ")").attr("disabled", "disabled");
                console.log(first);
            });
            $('#third_pref').change(function () {
                var option = this.options[this.selectedIndex];
                arr['third_pref'] = option.value;
                arr['third_pref_value'] = option.innerText;
                console.log(arr);
                var first = arr['first_pref_value'];
                var second = arr['second_pref_value'];
                $('#fourth_pref').css('transform', 'scale(1,1)');
                $("#fourth_pref option:contains(" + option.innerText + ")").attr("disabled", "disabled");
                $("#fourth_pref option:contains(" + first + ")").attr("disabled", "disabled");
                $("#fourth_pref option:contains(" + second + ")").attr("disabled", "disabled");
            });
        });

    </script>
{% endblock %}